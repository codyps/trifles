#! /bin/sh

w () { printf "%s\n" "$*" >&2 ; }

if [ $# -lt 1 ]; then
	w "usage: $0 show <thing>"
	exit 1
fi

case "$1" in
show)
	if [ $# -ne 2 ]; then
		ls /sys/devices/system/cpu/cpu0
		exit 0
	fi

	for i in /sys/devices/system/cpu/cpu[0123456789]*; do
		cpu=$(basename $i)
		printf "$cpu : "
		cat "$i"/cpufreq/"$2"
	done
	;;
*)
	w "unknown action '$1'"
	exit 2
	;;
esac
